<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Выбор слота — Walk & Talk</title>

  <!-- Шрифты как на главной -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inria+Sans:ital,wght@0,400;0,700;1,400&family=Inria+Serif:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /* ===== 8px-токены и база в стиле основного сайта ===== */
    :root{
      --g: 8px;
      --space-80: calc(10 * var(--g));
      --space-40: calc(5 * var(--g));
      --space-16: calc(2 * var(--g));

      --container: 320px;      /* мобильный кадр «в размер» */
      --bg: #fff;
      --text: #111;
      --muted: #666;

      --h1: 25px;              /* Inria Serif */
      --h2: 24px;              /* Inria Sans Regular */
      --h3: 24px;              /* Inria Sans Bold */
      --body: 16px;
    }
    *,*::before,*::after{ box-sizing:border-box }
    html,body{ margin:0; padding:0 }
    body{
      background: var(--bg);
      color: var(--text);
      font: var(--body)/1.4 "Inria Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* Каркас */
    .wrap{ width:min(100%, var(--container)); margin-inline:auto; padding: var(--space-80) var(--space-16); }
    .ta-center{ text-align:center }
    .muted{ color:var(--muted) }
    .micro{ font-size:12px }

    /* Заголовки как на главной */
    .h1{ font: normal var(--h1)/1.3 "Inria Serif", Georgia, serif; margin: 0 0 var(--space-16); }
    .lead{ margin: 0 0 var(--space-40); }

    /* ===== Кнопка общего вида (CTA), как на главной ===== */
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      padding: 12px 16px; border-radius:999px;
      background:#111; color:#fff; text-decoration:none; font-weight:700;
      transition: transform .15s ease, box-shadow .15s ease, background-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow:0 6px 14px rgba(17,17,17,.15) }
    .btn:active{ transform: translateY(0); box-shadow:0 2px 6px rgba(17,17,17,.2) inset }
    .btn:focus-visible{ outline:2px solid #111; outline-offset:2px }
    @media (prefers-reduced-motion: reduce){ .btn{ transition:none } }

    /* ===== Сетка слотов — простой блочный поток ===== */
    .slot-grid{
      display:grid;
      gap: var(--space-16);
      margin: var(--space-40) 0;
    }

    /* Кнопки-слоты — ЧЕРНЫЕ, как CTA на главной */
    button.slot{
      appearance:none; border:none; background:#111; color:#fff;
      font-weight:700; padding: 12px 16px; border-radius: 999px; cursor:pointer;
      transition: transform .05s ease, box-shadow .15s ease, background-color .2s ease;
    }
    button.slot:hover{ transform: translateY(-1px); box-shadow:0 6px 14px rgba(17,17,17,.15) }
    button.slot:active{ transform: translateY(0); box-shadow:0 2px 6px rgba(17,17,17,.2) inset }
    button.slot:focus-visible{ outline:2px solid #111; outline-offset:2px }
    button.slot:disabled{ opacity:.6; cursor:default }

    /* Футер как на главной */
    .footer{
      padding-block: var(--space-80);
      border-top: 1px solid #eee;
    }
    .footer .container{
      width:min(100%, var(--container));
      margin-inline:auto;
      padding-inline: var(--space-16);
      text-align:center;
    }
    .footer .body{ margin:0 0 var(--space-16); }

    /* Центрирование макета на шире 480px (без «резины») */
    @media (min-width:480px){ :root{ --container: 360px } }
  </style>

  <!-- Без JS: прячем сетку и показываем уведомление -->
  <noscript>
    <style>.slot-grid{display:none}.ok{display:block;color:#e53935;font-weight:700;margin-top:var(--space-16)}</style>
  </noscript>
</head>
<body>

  <div class="wrap ta-center">
    <!-- Заголовок — по твоей правке -->
    <h1 class="h1">Pick a time.</h1>
    <!-- краткий лид можно убрать совсем; оставляю пустым -->

    <!-- Слоты (кнопки) -->
    <div class="slot-grid" id="slots" role="group" aria-label="Доступные слоты"></div>

    <!-- Быстрая обратная связь -->
    <div id="ok" class="ok micro" style="display:none">Thanks!</div>
  </div>

  <!-- Футер как на главной -->
  <footer class="footer">
    <div class="container">
      <p class="body muted">© Walk &amp; Talk — student pilot.</p>
      <p class="body muted">Made with ❤️ in Stuttgart</p>
    </div>
  </footer>

  <script>
    /* === НАСТРОЙКА ===
       Слоты 19–21 по часу.
       Вариант A/B берётся из ?variant=... (например, price / value).
    */
    const SLOTS   = ["19:00","20:00","21:00"];
    const VARIANT = new URLSearchParams(location.search).get('variant') || 'default';

    /* === ТВОЯ Google Form (Slot + Variant) ===
       ВАЖНО: именно /formResponse (не /viewform)
    */
    const FORM_BASE     = "https://docs.google.com/forms/d/e/1FAIpQLSfHdEkyLyyvjmbTR4MgJ-iYDH56hTf5So9J5AjO5KWq_k5gDQ/formResponse";
    const ENTRY_SLOT    = "entry.516892861";   // Slot
    const ENTRY_VARIANT = "entry.1461502828";  // Variant

    // Отправка «пикселем» (чтобы запрос успел уйти до редиректа)
    function logToGoogleForms(slotLabel){
      const p = new URLSearchParams();
      p.set(ENTRY_SLOT,   slotLabel);
      p.set(ENTRY_VARIANT, VARIANT);
      p.set('submit', 'Submit');
      const url = FORM_BASE + "?" + p.toString() + "&t=" + Date.now();

      const img = new Image();
      img.width = 1; img.height = 1; img.alt = "";
      img.style = "position:absolute;left:-9999px;top:-9999px;";
      img.src = url;
      document.body.appendChild(img);
    }

    function makeSlotButton(label){
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'slot';
      btn.textContent = label;
      btn.addEventListener('click', () => onSlotClick(label));
      return btn;
    }

    let clicked = false;
    function onSlotClick(label){
      if (clicked) return;                // защита от двойных кликов
      clicked = true;

      // 1) логируем
      logToGoogleForms(label);

      // 2) мгновенная обратная связь и дизейбл
      const ok = document.getElementById('ok');
      ok.style.display = 'block';
      ok.textContent = `Спасибо! Слот ${label} отмечен.`;
      document.querySelectorAll('button.slot').forEach(b => b.disabled = true);

      // 3) редирект на «спасибо»
      setTimeout(() => {
        location.href = `thanks.html?slot=${encodeURIComponent(label)}&variant=${encodeURIComponent(VARIANT)}`;
      }, 300);
    }

    // Монтирование
    (function mount(){
      const root = document.getElementById('slots');
      SLOTS.forEach(s => root.appendChild(makeSlotButton(s)));
    })();
  </script>
</body>
</html>
