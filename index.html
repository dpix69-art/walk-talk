<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Выбор слота — MVP</title>
  <style>
    :root { --bg:#0b0b0f; --card:#121219; --text:#e8e8f0; --muted:#9aa0a6; --accent:#6ee7b7; }
    * { box-sizing:border-box; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; background:var(--bg); color:var(--text); }
    .wrap { max-width:720px; margin:0 auto; padding:32px 20px 56px; }
    .card { background:var(--card); border:1px solid #1f2130; border-radius:16px; padding:24px; box-shadow:0 2px 20px rgba(0,0,0,.25); }
    h1 { margin:0 0 8px; font-size:28px; letter-spacing:.2px; }
    p.lead { margin:0 0 16px; color:var(--muted); }
    .grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(180px,1fr)); gap:12px; margin:20px 0 12px; }
    button.slot { padding:14px 16px; border-radius:12px; border:1px solid #2a2d41; background:#171826; color:#fff; font-weight:600; cursor:pointer; transition:transform .04s ease, border-color .2s ease; }
    button.slot:hover { border-color:#3b3f5e; transform:translateY(-1px); }
    button.slot:active { transform:translateY(0); }
    .muted { color:var(--muted); font-size:14px; }
    .note { font-size:13px; color:#b6b9c3; margin-top:12px; line-height:1.4; }
    .ok { display:none; margin-top:10px; color:var(--accent); font-weight:600; }
    .footer { margin-top:28px; display:flex; gap:8px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
    .tiny { font-size:12px; color:#9196a7; }
    .row { display:flex; gap:8px; flex-wrap:wrap; }
    a.link { color:#9ad7ff; text-decoration:none; border-bottom:1px dotted #2b5; }
    code { background:#0f1020; padding:2px 6px; border-radius:6px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px; }
  </style>
  <!-- Optional analytics (add your domain/project as needed)
  <script defer data-domain="YOUR_DOMAIN" src="https://plausible.io/js/script.js"></script> -->
 
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Выбери удобное время</h1>
      <p class="lead">Тестируем идею. Нажми на слот — этого достаточно, чтобы мы поняли интерес. Никаких персональных данных.</p>

      <div class="grid" id="slots"></div>
      <div id="ok" class="ok">Спасибо! Интерес зафиксирован.</div>

      <p class="note">После клика мы покажем «спасибо». Для подсчёта кликов можно:
        <br>— подключить аналитику (например, Plausible / GA),<br>
        — или включить отправку в Google Sheets (см. <a class="link" href="./readme.html">readme</a>).</p>

      <div class="footer">
        <div class="tiny">MVP • статика на GitHub Pages</div>
        <div class="row tiny">
          <span>Версия: 1.0</span>
          <span>|</span>
          <a class="link" href="thanks.html">Страница «спасибо»</a>
        </div>
      </div>
    </div>
  </div>

<script>
/**
 * Настройки слотов и логирования
 */
const SLOTS = ["19:00","20:00","21:00"];
const LOG_MODE = "none"; // "none" | "apps_script"
const LOG_ENDPOINT = "";  // Вставь URL из Google Apps Script развернутого web app

function makeSlotButton(label){
  const btn = document.createElement('button');
  btn.className = 'slot';
  btn.textContent = label;
  btn.addEventListener('click', () => onSlotClick(label));
  return btn;
}

function onSlotClick(label){
  // 1) Показать мгновенную обратную связь
  const ok = document.getElementById('ok');
  ok.style.display = 'block';
  ok.textContent = `Спасибо! Слот ${label} отмечен.`;

  // 2) Отправить лог (по желанию)
  trackClick(label);

  // 3) Уникальный URL для аналитики (по желанию)
  // Можно раскомментировать, чтобы перенаправлять на «thanks.html?slot=19:00»
  location.href = `thanks.html?slot=${encodeURIComponent(label)}`;
}

async function trackClick(label){
  const payload = {
    slot: label,
    ts: new Date().toISOString(),
    ua: navigator.userAgent,
  };

  if (LOG_MODE === "apps_script" && LOG_ENDPOINT){
    try{
      await fetch(LOG_ENDPOINT, {
        method: 'POST',
        mode: 'no-cors', // упрощаем CORS для Apps Script
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload),
      });
      // no-cors не даст прочитать ответ — это нормально для MVP
    }catch(e){
      console.warn('Log error', e);
    }
  } else {
    console.log('[MVP log]', payload);
  }
}

function mount(){
  const root = document.getElementById('slots');
  SLOTS.forEach(s => root.appendChild(makeSlotButton(s)));
  // Автозамена заголовка, если есть q-параметры (для разных офферов/цен)
  const p = new URLSearchParams(location.search);
  const title = p.get('title');
  if (title){ document.querySelector('h1').textContent = title; }
}
mount();
</script>
</body>
</html>
